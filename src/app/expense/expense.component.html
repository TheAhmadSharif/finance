<div class="row">
  <div class="col-sm-4" style="margin-bottom: 20px;"> 
    <div class="card">
        <div class="card-body">
          <h6 class="h6">Add Expense</h6>
          <div class="divider"></div>
    
          <div *ngIf="notification" class="alert alert-warning">
              {{ notification }}
          </div> <!-- End Alert -->
    
    
                        
                <div class="form-group">
                  <div class="input-group">
                    <input class="form-control" placeholder="yyyy/mm/dd"
                            ngbDatepicker #expenseDate="ngbDatepicker" (click)="expenseDate.toggle()" [(ngModel)]="expense.date">
                    <div class="input-group-append">
                      <button class="btn btn-outline-secondary disabled calendar" (click)="expenseDate.toggle()">
                        </button>
                    </div>
                  </div> <!-- End input group -->
                </div> <!-- End form group -->



                <div class="form-group">
                  <input type="hidden" [(ngModel)]="expense.category">
                  <select name="expense_type" class="custom-select" #category (click)="getCategory(category.value)">
                      <option selected="true" disabled value="0">Select Bill Type </option>
                      <option value="Utility">Utlity Bill</option>
                      <option value="Overtime">Employee Overtime/Bounus Bill</option>
                      <option value="Foods">Foods</option>
                      <option value="Salary">Employee Salary</option>
                      <option value="Others">Others</option>
                  </select>    
                </div> <!-- End form-group-->
    
    
                <div *ngIf="category.value == 'Utility' " class="form-group" (click)="getSubCategory(subcategory.value)">
                 
                  <input type="hidden" [(ngModel)]="expense.subcategory">
                  <select name="expense_type" class="custom-select" #subcategory>
                      <option selected="true" disabled value="0">Select a Sub category</option>
                      <option value="Electric">Electric Bill</option>
                      <option value="Internet">Internet Bill</option>
                      <option value="Market Maintainance">Market Maintainance</option>
                      <option value="Others">Others</option>
                  </select>    
                  <div *ngIf="sub_others">
                    <input type="text" placeholder="Write " [(ngModel)]="expense.subcategory_others" name ="expense.others" class="form-control">
                  </div>
                </div> <!-- End form-group-->
                
            
    
            <div class="form-group">  
                <input type="number" min="0" placeholder="Expense Amount" class="form-control mb-2" [(ngModel)]="expense.amount">
             </div> <!-- End --> 
    
    
            <div class="form-group">  
              <input type="text" placeholder="Expense note" class="form-control mb-2" [(ngModel)]="expense.note">
           </div> <!-- End form-group-->
    
            <div class="form-group">
              <button class="btn btn-sm btn-success" (click)="postExpense(expense)">Add Expense</button>
            </div>  <!-- End form-group-->
      </div> <!-- End card body -->
      </div> <!-- End card  -->
    </div> <!-- End col 6 -->






    
    <div class="col-sm-8">
      <div class="card" style="margin-bottom: 30px">
          <div class="card-body">
              <div class="" style="margin: 0;">
                <div class="row">
                  <div class="col-sm-6 col-12">
                    <div class="d-flex">
                        <div class="form-group">
                      <div class="input-group">
                        <input type="hidden" placeholder="yyyy/mm/dd"
                               name="selected_day" [(ngModel)]="selected_day" ngbDatepicker #d2="ngbDatepicker" [placement]="placement" [positionTarget]="buttonEl">
                        <div class="date-block">
                          <span>{{  selected_day.year + '-' + selected_day.month + '-' + selected_day.day | date: 'dd, MMMM y' }}</span>
                            
                          <span #buttonEl class="btn disabled cp calendar" (click)="d2.toggle()">
                            </span>
                        </div>  <!-- End date-block -->
                      </div> <!-- End input group -->
                    </div> <!-- End Form group -->

                    <div class="d-flex arrow-block" style="margin: 0;">
                                <div>
                                  <span class="material-icons cp arrow" (click)="getPrevDate(selected_day)">
                                    keyboard_arrow_left
                                    </span>

                                    <span class="material-icons cp arrow" (click)="getNextDate(selected_day)">
                                     keyboard_arrow_right
                                    </span>
                                </div>
                                <div>
                                  <span class="btn btn-sm btn-outline-success" (click)="getDayData(selected_day)">Get Data</span>
                                </div>
                                
                    </div> <!-- End div d-flex -->
                      
                    </div>   <!-- End d-flex -->
                  </div> <!-- End Col 6 -->

                  <div class="col-sm-6 col-12">
                    <div class="d-flex justify-content-end">
                        <span class="btn btn-sm btn-outline-success" (click)="getDateRange('158963','1586249741065')">Get Data by Range</span>
                    </div>  <!-- End d-flex -->
                  </div> <!-- End Col 6 -->
                </div> <!-- End row -->
              </div>  <!-- End -->

              <table class="table">
                <tr>
                  <td>#Serial</td>
                  <td>Amount</td>
                  <td>Bill Type</td>
                  <td>Date</td>
                  <td>Note</td>
                </tr>
  
                <tr *ngFor="let object of expenses | paginate: { itemsPerPage: 2, currentPage: p }; let i = index;">
                  <td> {{ i + 1 }} </td>
                  <td> <a routerLink="{{ object.expense.category.split(' ')[0]  + '/' + object.expense.datetime }}">{{ object.expense.amount }} TK</a> </td>
                  <td> <a routerLink="category/{{ object.expense.category.split(' ')[0] }}">{{ object.expense.category  }}</a> </td>
                  <td> {{ object.expense.userdate | date:'MMM d, y, EE' }} </td>
                  <td> {{ object.expense.note  }} </td>
                </tr>
              </table>
              <div class="mb-2">
                Total Expense: <span class="h4">{{ totalExpense }} </span> <span>TK</span>
               </div> <!-- End -->

               <div class="d-flex justify-content-end">
                <pagination-controls (pageChange)="p = $event"></pagination-controls>
               </div>  
           
          </div>    <!-- End card body -->
      </div> <!-- End card  -->

      <div class="card">
        <div class="card-body">
                  <div>
                    <ngx-charts-bar-vertical
                    [view]="view"
                    [scheme]="colorScheme"
                    [results]="single"
                    [gradient]="gradient"
                    [xAxis]="showXAxis"
                    [yAxis]="showYAxis"
                    [legend]="showLegend"
                    [showXAxisLabel]="showXAxisLabel"
                    [showYAxisLabel]="showYAxisLabel"
                    [xAxisLabel]="xAxisLabel"
                    [yAxisLabel]="yAxisLabel"
                    (select)="onSelect($event)">
                  </ngx-charts-bar-vertical>
                  </div>
        </div> <!-- End card body -->
      </div> <!-- End card  -->
    </div>  <!-- End col -->
</div> <!-- End row -->